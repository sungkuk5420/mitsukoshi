{"version":3,"sources":["../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/process/browser.js","pwacompat.js"],"names":["process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","nextTick","args","Array","arguments","i","push","Item","array","prototype","apply","title","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","window","capableDisplayModes","defaultSplashColor","defaultSplashTextSize","idealSplashIconSize","minimumSplashIconSize","splashIconPadding","isSafari","navigator","vendor","indexOf","isEdge","userAgent","isEdgePWA","Windows","setup","manifestEl","document","head","querySelector","manifestHref","href","hrefFactory","buildHrefFactory","location","Promise","resolve","then","opts","crossOrigin","credentials","fetch","response","json","data","catch","err","console","warn","options","opt","URL","part","toString","localName","attr","node","createElement","k","setAttribute","appendChild","meta","content","manifest","urlFactory","icons","sort","a","b","parseInt","sizes","appleTouchIcons","map","icon","display","isCapable","updateThemeColorRender","orientation","simpleOrientationFor","backgroundIsLight","shouldUseLightForeground","itunes","findAppleId","splashFor","width","height","ratio","devicePixelRatio","ctx","contextForCanvas","scale","fillStyle","fillRect","translate","font","textWidth","measureText","iconWidth","iconHeight","drawImage","fillText","generatedSplash","canvas","toDataURL","previous","Set","updateSplash","applicationIcon","portrait","screen","landscape","forEach","prev","remove","add","img","Image","onload","redrawn","updateTransparent","slice","src","related","filter","app","match","v","String","prefix","substr","color","themeIsLight","t","getEdgeTitleBar","debug","foregroundColor","colorToWindowsRGBA","backgroundColor","UI","ViewManagement","ApplicationView","getForCurrentView","titleBar","readColor","c","getImageData","pixelData","f","Math","pow","lum","contrast","abs","image","background","force","context","imageData","globalCompositeOperation","getContext","readyState","addEventListener"],"mappings":"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","file":"pwacompat.cb517f16.js","sourceRoot":"..","sourcesContent":["// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*\r\n * Copyright 2018 Google Inc. All rights reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\r\n * use this file except in compliance with the License. You may obtain a copy of\r\n * the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\r\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\r\n * License for the specific language governing permissions and limitations under\r\n * the License.\r\n */\r\n\r\n'use strict';\r\n\r\n(function() {\r\n  if (!('fetch' in window)) {\r\n    return;  // basic feature detection: from Mobile Safari 10.3+\r\n  }\r\n\r\n  const capableDisplayModes = ['standalone', 'fullscreen', 'minimal-ui'];\r\n  const defaultSplashColor = '#f8f9fa';\r\n  const defaultSplashTextSize = 24;\r\n  const idealSplashIconSize = 128;\r\n  const minimumSplashIconSize = 48;\r\n  const splashIconPadding = 32;\r\n\r\n  const isSafari = (navigator.vendor && navigator.vendor.indexOf('Apple') !== -1);\r\n  const isEdge = (navigator.userAgent && navigator.userAgent.indexOf('Edge') !== -1);\r\n  const isEdgePWA = (typeof Windows !== 'undefined');\r\n\r\n  function setup() {\r\n    const manifestEl = document.head.querySelector('link[rel=\"pwa-setup\"]');\r\n    const manifestHref = manifestEl ? manifestEl.href : '';\r\n    const hrefFactory = buildHrefFactory([manifestHref, window.location]);\r\n\r\n    Promise.resolve()\r\n        .then(() => {\r\n          if (!manifestHref) {\r\n            throw `can't find <link rel=\"manifest\" href=\"..\" />'`;\r\n          }\r\n          const opts = /** @type {!RequestInit} */ ({});\r\n          if (manifestHref.crossOrigin === 'use-credentials') {\r\n            opts.credentials = 'include';\r\n          }\r\n          return window.fetch(manifestHref, opts);\r\n        })\r\n        .then((response) => response.json())\r\n        .then((data) => process(data, hrefFactory))\r\n        .catch((err) => console.warn('pwacompat.js error', err));\r\n  }\r\n\r\n  /**\r\n   * @param {!Array<string>} options\r\n   * @return {function(string): string}\r\n   */\r\n  function buildHrefFactory(options) {\r\n    for (let i = 0; i < options.length; ++i) {\r\n      const opt = options[i];\r\n      try {\r\n        new URL('', opt);\r\n        return (part) => (new URL(part, opt)).toString();\r\n      } catch (e) {}\r\n    }\r\n    return (part) => part;\r\n  }\r\n\r\n  function push(localName, attr) {\r\n    const node = document.createElement(localName);\r\n    for (const k in attr) {\r\n      node.setAttribute(k, attr[k]);\r\n    }\r\n    document.head.appendChild(node);\r\n    return node;\r\n  }\r\n\r\n  function meta(name, content) {\r\n    if (content) {\r\n      if (content === true) {\r\n        content = 'yes';\r\n      }\r\n      push('meta', {name, content});\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param {!Object<string, (string|*)>} manifest\r\n   * @param {function(string): string} urlFactory\r\n   */\r\n  function process(manifest, urlFactory) {\r\n    const icons = manifest['icons'] || [];\r\n    icons.sort((a, b) => parseInt(b.sizes, 10) - parseInt(a.sizes, 10));  // largest first\r\n    const appleTouchIcons = icons.map((icon) => {\r\n      // create icons as byproduct\r\n      const attr = {'rel': 'icon', 'href': urlFactory(icon['src']), 'sizes': icon['sizes']};\r\n      push('link', attr);\r\n      if (isSafari) {\r\n        attr['rel'] = 'apple-touch-icon';\r\n        return push('link', attr);\r\n      }\r\n    });\r\n\r\n    const display = manifest['display'];\r\n    const isCapable = capableDisplayModes.indexOf(display) !== -1;\r\n    meta('mobile-web-app-capable', isCapable);\r\n    updateThemeColorRender(/** @type {string} */ (manifest['theme_color']) || 'black');\r\n\r\n    if (isEdge) {\r\n      meta('msapplication-starturl', manifest['start_url'] || '/');\r\n      meta('msapplication-TileColor', manifest['theme_color']);\r\n    }\r\n\r\n    // nb: we check, but this won't override any _earlier_ (in DOM order) theme-color\r\n    if (!document.head.querySelector('[name=\"theme-color\"]')) {\r\n      meta('theme-color', manifest['theme_color']);\r\n    }\r\n\r\n    // TODO(samthor): We don't detect QQ or UC, we just set the vars anyway.\r\n    const orientation = simpleOrientationFor(manifest['orientation']);\r\n    meta('x5-orientation', orientation);      // QQ\r\n    meta('screen-orientation', orientation);  // UC\r\n    if (display === 'fullscreen') {\r\n      meta('x5-fullscreen', 'true');  // QQ\r\n      meta('full-screen', 'yes');     // UC\r\n    } else if (isCapable) {\r\n      meta('x5-page-mode', 'app');         // QQ\r\n      meta('browsermode', 'application');  // UC\r\n    }\r\n\r\n    if (!isSafari) {\r\n      return;  // the rest of this file is for Safari\r\n    }\r\n\r\n    const backgroundIsLight = shouldUseLightForeground(\r\n        /** @type {string} */ (manifest['background_color']) || defaultSplashColor);\r\n    const title = manifest['name'] || manifest['short_name'] || document.title;\r\n\r\n    // Add related iTunes app from manifest.\r\n    const itunes = findAppleId(manifest['related_applications']);\r\n    itunes && meta('apple-itunes-app', `app-id=${itunes}`);\r\n\r\n    // General iOS meta tags.\r\n    meta('apple-mobile-web-app-capable', isCapable);\r\n    meta('apple-mobile-web-app-title', title);\r\n\r\n    function splashFor({width, height}, orientation, icon) {\r\n      const ratio = window.devicePixelRatio;\r\n      const ctx = contextForCanvas({width: width * ratio, height: height * ratio});\r\n\r\n      ctx.scale(ratio, ratio);\r\n      ctx.fillStyle = manifest['background_color'] || defaultSplashColor;\r\n      ctx.fillRect(0, 0, width, height);\r\n      ctx.translate(width / 2, (height - splashIconPadding) / 2);\r\n\r\n      ctx.font = `${defaultSplashTextSize}px HelveticaNeue-CondensedBold`;\r\n      ctx.fillStyle = backgroundIsLight ? 'white' : 'black';\r\n      const textWidth = ctx.measureText(title).width;\r\n\r\n      if (icon) {\r\n        // nb: on Chrome, we need the image >=48px, use the big layout >=80dp, ideal is >=128dp\r\n        let iconWidth = (icon.width / ratio);\r\n        let iconHeight = (icon.height / ratio);\r\n        if (iconHeight > idealSplashIconSize) {\r\n          // clamp to 128px height max\r\n          iconWidth /= (iconHeight / idealSplashIconSize);\r\n          iconHeight = idealSplashIconSize;\r\n        }\r\n\r\n        if (iconWidth >= minimumSplashIconSize && iconHeight >= minimumSplashIconSize) {\r\n          ctx.drawImage(icon, iconWidth / -2, iconHeight / -2, iconWidth, iconHeight);\r\n          ctx.translate(0, iconHeight / 2 + splashIconPadding);\r\n        }\r\n      }\r\n      ctx.fillText(title, textWidth / -2, 0);\r\n\r\n      const generatedSplash = document.createElement('link');\r\n      generatedSplash.setAttribute('rel', 'apple-touch-startup-image');\r\n      generatedSplash.setAttribute('media', `(orientation: ${orientation})`);\r\n      generatedSplash.setAttribute('href', ctx.canvas.toDataURL());\r\n\r\n      return generatedSplash;\r\n    }\r\n\r\n    const previous = new Set();\r\n    function updateSplash(applicationIcon) {\r\n      const portrait = splashFor(window.screen, 'portrait', applicationIcon);\r\n      const landscape = splashFor({\r\n        width: window.screen.height,\r\n        height: window.screen.width,\r\n      }, 'landscape', applicationIcon);\r\n\r\n      previous.forEach((prev) => prev.remove());\r\n\r\n      document.head.appendChild(portrait);\r\n      document.head.appendChild(landscape);\r\n      previous.add(portrait);\r\n      previous.add(landscape);\r\n    }\r\n    updateSplash(null);\r\n\r\n    // fetch the largest icon to generate a splash screen\r\n    if (!appleTouchIcons.length) {\r\n      return;\r\n    }\r\n    const icon = appleTouchIcons[0];\r\n    const img = new Image();\r\n    img.crossOrigin = 'anonymous';\r\n    img.onload = () => {\r\n      updateSplash(img);\r\n\r\n      // also check and redraw icon\r\n      if (!manifest['background_color']) {\r\n        return;\r\n      }\r\n      const redrawn = updateTransparent(img, manifest['background_color']);\r\n      if (redrawn === null) {\r\n        return;  // the rest probably aren't interesting either\r\n      }\r\n      icon.href = redrawn;\r\n\r\n      // fetch and fix all remaining icons\r\n      appleTouchIcons.slice(1).forEach((icon) => {\r\n        const img = new Image();\r\n        img.crossOrigin = 'anonymous';\r\n        img.onload = () => {\r\n          const redrawn = updateTransparent(img, manifest['background_color'], true);\r\n          icon.href = redrawn;\r\n        };\r\n        img.src = icon.href;\r\n      });\r\n\r\n    };\r\n    img.src = icon.href;\r\n  }\r\n\r\n  function findAppleId(related) {\r\n    let itunes;\r\n    (related || [])\r\n        .filter((app) => app['platform'] === 'itunes')\r\n        .forEach((app) => {\r\n          if (app['id']) {\r\n            itunes = app['id'];\r\n          } else {\r\n            const match = app['url'].match(/id(\\d+)/);\r\n            if (match) {\r\n              itunes = match[1];\r\n            }\r\n          }\r\n        });\r\n    return itunes;\r\n  }\r\n\r\n  function simpleOrientationFor(v) {\r\n    v = String(v || '');\r\n    const prefix = v.substr(0, 3);\r\n    if (prefix === 'por') {\r\n      return 'portrait';\r\n    } else if (prefix === 'lan') {\r\n      return 'landscape';\r\n    }\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * @param {string} color\r\n   */\r\n  function updateThemeColorRender(color) {\r\n    if (!(isSafari || isEdgePWA)) {\r\n      return;\r\n    }\r\n\r\n    const themeIsLight = shouldUseLightForeground(color);\r\n    if (isSafari) {\r\n      // nb. Safari 11.3+ gives a deprecation warning about this meta tag.\r\n      // TODO(samthor): Potentially set black-translucent in 'fullscreen'.\r\n      meta('apple-mobile-web-app-status-bar-style', themeIsLight ? 'black' : 'default');\r\n    } else {\r\n      // Edge PWA\r\n      const t = getEdgeTitleBar();\r\n      if (t === null) {\r\n        console.debug('UWP no titleBar')\r\n        return;\r\n      }\r\n      t.foregroundColor = colorToWindowsRGBA(themeIsLight ? 'black' : 'white');\r\n      t.backgroundColor = colorToWindowsRGBA(color);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @return {?ApplicationViewTitleBar}\r\n   */\r\n  function getEdgeTitleBar() {\r\n    try {\r\n      return Windows.UI.ViewManagement.ApplicationView.getForCurrentView().titleBar;\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The Windows titlebar APIs expect an object of {r, g, b, a}.\r\n   *\r\n   * @param {string} color\r\n   * @return {WindowsColor}\r\n   */\r\n  function colorToWindowsRGBA(color) {\r\n    const data = readColor(color);\r\n    return /** @type {WindowsColor} */ ({\r\n      'r': data[0],\r\n      'g': data[1],\r\n      'b': data[2],\r\n      'a': data[3],\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @param {string} color\r\n   * @return {!Uint8ClampedArray}\r\n   */\r\n  function readColor(color) {\r\n    const c = contextForCanvas();\r\n    c.fillStyle = color;\r\n    c.fillRect(0, 0, 1, 1);\r\n    return c.getImageData(0, 0, 1, 1).data;\r\n  }\r\n\r\n  /**\r\n   * @param {string} color\r\n   * @return {boolean}\r\n   */\r\n  function shouldUseLightForeground(color) {\r\n    const pixelData = readColor(color);\r\n\r\n    // From https://cs.chromium.org/chromium/src/chrome/android/java/src/org/chromium/chrome/browser/util/ColorUtils.java\r\n    const data = pixelData.map((v) => {\r\n      const f = v / 255;\r\n      return (f < 0.03928) ? f / 12.92 : Math.pow((f + 0.055) / 1.055, 2.4);\r\n    });\r\n    const lum = 0.2126 * data[0] + 0.7152 * data[1] + 0.0722 * data[2];\r\n    const contrast = Math.abs((1.05) / (lum + 0.05));\r\n    return contrast > 3;\r\n  }\r\n\r\n  function updateTransparent(image, background, force=false) {\r\n    const context = contextForCanvas(image);\r\n    context.drawImage(image, 0, 0);\r\n\r\n    // look for transparent pixel in top-left\r\n    // TODO: Chrome actually checks the four corners for some cases.\r\n    if (!force) {\r\n      const imageData = context.getImageData(0, 0, 1, 1);\r\n      if (imageData.data[3] == 255) {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    context.globalCompositeOperation = 'destination-over';  // only replace transparent areas\r\n    context.fillStyle = background;\r\n    context.fillRect(0, 0, image.width, image.height);\r\n    return context.canvas.toDataURL();\r\n  }\r\n\r\n  function contextForCanvas({width, height} = {width: 1, height: 1}) {\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n    return canvas.getContext('2d');\r\n  }\r\n\r\n  // actually run PWACompat here\r\n  if (document.readyState === 'complete') {\r\n    setup();\r\n  } else {\r\n    window.addEventListener('load', setup);\r\n  }\r\n}());\r\n\r\n"]}